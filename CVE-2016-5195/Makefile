CFLAGS := -Wall
LDFLAGS := -lpthread

all: exp

exp: exp.o
	$(CC) -o $@ $^ $(LDFLAGS)

exp.o: exp.c payload.h
	$(CC) -o $@ -c $< $(CFLAGS)

#xxd -i输出c语言格式的数组定义
payload.h: payload
	xxd -i $^ $@

payload: payload.s
	nasm -f bin -o $@ $^

clean:
	rm -f *.o *.h exp